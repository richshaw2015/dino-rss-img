
import re
from urllib.parse import urlparse, urljoin
from scrapy.http import HtmlResponse
import logging
import urllib.request
import requests
import os

SERVER = 'http://localhost:8000'


def get_short_host_name(url: str) -> str:
    return re.sub(r'^www\.|^blog\.|^blogs\.|^tech\.', '', urlparse(url).netloc)


def get_html(url: str) -> str:
    host = get_short_host_name(url)
    html_file = os.path.join('cache', f"{host}.html")

    if os.path.exists(html_file):
        return open(html_file, encoding='UTF8').read()
    else:
        try:
            rsp = requests.get(url, timeout=60, verify=False, headers={
                "Referer": url,
                "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.67 Safari/537.36",
            })
            if rsp and rsp.ok:
                open(html_file, 'w', encoding='UTF8').write(rsp.text)
                return rsp.text
        except Exception as e:
            logging.warning(f"{url}: {e}")

    return ''


def sync_host_favicon(url: str) -> str:
    host = get_short_host_name(url)

    png = os.path.join('img', f"{host}.png")
    jpg = os.path.join('img', f"{host}.jpg")

    if os.path.exists(png):
        return png
    elif os.path.exists(jpg):
        return jpg
    else:
        icon, html = '', get_html(url)

        if html:
            response = HtmlResponse(url=host, body=html, encoding='utf8')

            icon = response.selector.xpath("//link[@rel='apple-touch-icon'][last()]/@href").extract_first()
            if not icon:
                icon = response.selector.xpath("//link[@rel='apple-touch-icon-precomposed'][last()]/@href").\
                    extract_first()
            if not icon:
                icon = response.selector.xpath("//meta[@name='twitter:image']/@content").extract_first()
            if not icon:
                icon = response.selector.xpath("//meta[@name='og:image']/@content").extract_first()
            if not icon:
                icon = response.selector.xpath("//link[@rel='icon'][last()]/@href").extract_first()
            if not icon:
                icon = response.selector.xpath("//link[@rel='shortcut icon'][last()]/@href").extract_first()

            if icon:
                icon_url = urljoin(url, icon.strip())
                try:
                    urllib.request.urlretrieve(icon_url, png)
                except Exception as e:
                    logging.warning(f"{url} {icon_url} {e}")
            else:
                logging.warning(url)

        return icon


def main() -> None:
    # rsp = requests.get(f"{SERVER}/api/monitor/noimg/feeds")
    import json
    rsp = json.loads('{"links": ["https://tech.ebayinc.com", "https://ridethelightning.senseient.com", "https://www.startribune.com", "http://www.forensickb.com", "https://datascopeanalytics.com", "https://elegantcode.com", "http://www.microsyl.com", "http://idlewords.com", "http://nowviskie.org", "https://www.alexlockwood.net", "https://www.kali.org", "https://www.hempuli.com", "https://tech.labs.oliverwyman.com", "https://gerrysweeney.com", "http://www.seguridadofensiva.com", "https://blog.erratasec.com", "http://www.electronicecircuits.com", "https://svpg.com", "http://security.debian.org", "http://www.psychologyofgames.com", "http://www.leninology.co.uk", "https://blog.xk72.com", "https://meowni.ca", "https://annevankesteren.nl", "http://elblogdeangelucho.com", "https://blogs.informatica.com", "http://wpbacon.com", "https://www.mattcutts.com", "https://www.kalzumeus.com", "http://interconnected.org", "https://labs.detectify.com", "https://www.destructoid.com", "https://vanschneider.com", "https://www.infosecblog.org", "https://www.suppermariobroth.com", "http://www.nickdiakopoulos.com", "https://www.hackmageddon.com", "http://damienkatz.net", "http://fireverse.org", "https://bealers.com", "https://news.namebay.com", "https://cognition.happycog.com", "https://us-cert.cisa.gov", "https://andrewmiracle.com", "https://airbrake.io", "https://jrainimo.com", "http://blog.nuclearsecrecy.com", "http://abandonedwig.info", "https://www.softuvo.com", "https://letsencrypt.org", "https://digitalwritingmonth.com", "https://nattieontheroad.com", "http://highscalability.com", "http://teespring.engineering", "http://eelpi.gotdns.org", "http://tim.cexx.org", "http://know.cujojs.com", "https://jakearchibald.com", "http://petersteinberger.com", "http://www.stephendiehl.com", "https://www.rubyflow.com", "http://emilychang.com", "https://www.veracode.com", "https://rayshobby.net", "http://www.webtvwire.com", "https://dangerousminds.net", "https://www.ibmbigdatahub.com", "https://webgazette.co.uk", "https://blog.hypriot.com", "https://osvaldas.info", "http://tavmjong.free.fr", "http://www.icsalabs.com", "http://zacstewart.com", "https://www.gradhacker.org", "http://jamiepricecreative.com", "https://www.pingdom.com", "https://www.dereuromark.de", "http://www.xanthir.com", "http://nealford.com", "https://ramiro.org", "https://aeon.co", "https://blog.paessler.com", "http://www.areopago21.org", "https://cenblog.org", "https://www.hldataprotection.com", "http://thedailywtf.com", "http://voodoomanmiracle.com", "https://www.intomobile.com", "http://the-witness.net", "http://www.andismith.com", "https://spyrestudios.com", "http://blog.sensible.io", "http://jumptuck.com", "https://www.mrmoneymustache.com", "https://blog.octo.com", "https://www.samplereality.com", "https://rakhesh.com", "http://blog.beefproject.com", "https://adrianroselli.com", "https://osmc.tv", "http://beza1e1.tuxen.de", "https://jcb-biowrites.rupress.org", "http://lousodrome.net", "https://kevin.burke.dev", "https://allanmacgregor.com", "https://superyesmore.com", "https://www.androidpolice.com", "https://terrywhite.com", "http://mrlovenstein.com", "http://engineroom.trackmaven.com", "http://www.josscrowcroft.com", "https://nootropicdesign.com", "https://enoent.fr", "https://blog.servo.org", "http://www.insecuremag.com", "http://4ms.org", "http://zurb.com", "https://making.pusher.com", "http://www.damonkohler.com", "https://www.fudzilla.com", "http://blog.osteele.com", "https://www.tablix.org", "http://www.rssmix.com", "https://www.spikenzielabs.com", "https://perspectives.mvdirona.com", "https://www.stefanjudis.com", "https://www.scottaaronson.com", "https://fuzzyblog.io", "https://www.extremetech.com", "http://blog.mozbox.org", "https://www.brainygamer.com", "https://dev.opera.com", "http://www.smashcompany.com", "http://rachelandrew.co.uk", "https://hallard.me", "http://www.databreachwatch.org", "http://jtoy.net", "https://www.kryogenix.org", "https://labs.nettitude.com", "http://evanjones.ca", "https://danluu.com", "https://www.cell.com", "http://www.instigatorblog.com", "http://www.webdevout.net", "https://marcus.io", "https://themillions.com", "https://www.rogerebert.com", "https://www.alaindebotton.com", "https://kk.org", "https://bryanalexander.org", "https://upcoder.com", "http://www.ermicro.com", "http://blog.venmo.com", "https://paulbakaus.com", "https://stuartsierra.com", "https://www.gatesnotes.com", "https://brendaneich.com", "http://evanminto.com", "https://www.learningjquery.com", "https://blog.janestreet.com", "https://androidpctv.com", "https://css3wizardry.com", "https://yogthos.net", "https://pando.com", "http://audreywatters.com", "http://nicolasgallagher.com", "https://mlwave.com", "https://gruntjs.com", "https://www.louisdorard.com", "https://news.humancoders.com", "https://sebsauvage.net", "https://oswalt.dev", "http://blog.assortedgarbage.com", "http://mishadoff.com", "http://jeffbridgforth.com", "http://www.blackploit.com", "https://blog.johanbove.info", "http://blog.hvidtfeldts.net", "https://blog.duangle.com", "http://www.windytan.com", "http://weblog.jamisbuck.org", "http://www.vcarrer.com", "https://blog.icare3d.org", "https://sophiehoulden.com", "https://hsivonen.fi", "https://www.jmeshe.co", "https://www.onlinelibrary.wiley.com", "http://wpaxl.com", "http://effbot.org", "http://www.elektronika.ba", "https://opensnow.com", "https://timkadlec.com", "http://www.realtimerendering.com", "http://www.practicallyefficient.com", "https://blog.tomayac.com", "https://philiphall.com", "https://www.yegor256.com", "http://blog.uncommonsensesecurity.com", "http://blog.joda.org", "https://nedbatchelder.com", "http://www.ehacking.net", "https://www.ciol.com", "https://www.jhongelectronics.org", "https://devblog.kogan.com", "https://www.letterheady.com", "https://tech.trivago.com", "http://www.somethingsimilar.com", "https://www.cyberciti.biz", "https://dutiee.com", "https://www.pogowasright.org", "https://www.technicalife.tech", "https://www.circuitlake.com", "https://mathiasbynens.be", "http://perfectionkills.com", "https://unsigned.io", "http://kraaima.com", "http://silencematters.com", "https://www.startupdonut.co.uk", "https://javascriptweekly.com", "https://planet.postgresql.org", "https://www.howtoforge.com", "https://www.infosecramblings.com", "http://mrmodemhead.com", "http://blog.pamelafox.org", "https://frontstuff.io", "https://www.sebastiansylvan.com", "http://www.theresistornetwork.com", "https://dresscode.renttherunway.com", "https://ferd.ca", "https://startuprev.com", "https://www.hexacorn.com", "https://cloudwafer.com", "https://chocobonplan.com", "https://rconversation.blogs.com", "https://www.bennadel.com", "https://www.docker.com", "http://n-gate.com", "https://mysqlserverteam.com", "http://www.ctl.io", "https://www.bridgestew.com", "http://www.daveakerman.com", "https://www.benjystanton.co.uk", "https://www.diigo.com", "https://waitbutwhy.com", "https://www.datarobot.com", "http://lukewaltzer.com", "https://vonkonow.com", "http://nicomuhly.com", "http://lolannonces.fr", "http://www.overcomingbias.com", "https://dhwthompson.com", "https://www.periscopedata.com", "https://www.alexandre-pestana.com", "https://www.rubyguides.com", "https://chrismcnamara.com", "https://peter.sh", "http://www.opengardensblog.futuretext.com", "http://nathanmarz.com", "http://burnt-traces.com", "https://blog.jessfraz.com", "http://laughingmeme.org", "https://blog.developer.bazaarvoice.com", "http://www.buttersafe.com", "http://www.cs.uni.edu", "https://codeclimate.com", "https://glyph.twistedmatrix.com", "https://tutorialzine.com", "http://liveramp.com", "https://www.beet.tv", "https://thatemil.com", "https://htmlcssjavascript.com", "http://thomaspfeifer.net", "http://www.neufeld.newton.ks.us", "https://marksarvas.blogs.com", "https://robert.penz.name", "https://www.enkisoftware.com", "http://patshaughnessy.net", "https://community.jisc.ac.uk", "http://www.gsm-modem.de", "http://highlowtech.org", "https://www.kvtech.ae", "http://www.propublica.org", "http://genesdev.cshlp.org", "https://superfriendlydesign.systems", "https://thedorf.de", "https://www.databreaches.net", "https://snyk.io", "https://tech.small-improvements.com", "http://feeds.feedburner.com", "https://thecustomizewindows.com", "https://codewithoutrules.com", "http://aphyr.com", "https://bjorn.tipling.com", "https://blogs.opera.com", "https://www.govinfosecurity.com", "http://www.ucomics.com", "https://remarkablemark.org", "http://hintjens.com", "https://datamining.typepad.com", "http://www.nerdybynature.com", "https://sebastiannilsson.com", "https://www.sightunseen.com", "https://www.scnsoft.com", "https://silentbreaksecurity.com", "https://www.atredis.com", "https://paulirish.com", "https://sive.rs", "http://www.knutsel.org", "https://onlyagame.typepad.com", "https://gavinr.com", "http://www.petecollier.com", "http://tinysubversions.com", "http://learningthreejs.com", "https://medriscoll.com", "https://rumproarious.com", "https://raspberrypi.werquin.com", "http://mattleifer.info", "http://arduiniana.org", "http://www.writerstechnology.com", "https://www2.politicalbetting.com", "http://previewlabs.com", "https://www.hochsensibilitaet-netzwerk.com", "https://www.beilstein-journals.org", "https://kilianvalkhof.com", "http://reset-game.net", "https://blog.suspectdevices.com", "https://usesthis.com", "https://engineering.opensooq.com", "https://blog.dragonsector.pl", "https://rinzewind.org", "https://www.newyorker.com", "http://www.glazman.org", "http://stevemarshall.com", "http://composition.al", "https://www.gamingalexandria.com", "https://www.nateberkopec.com", "https://engineering.groupon.com", "https://gigaom.com", "https://galois.com", "https://blogs.princeton.edu", "http://sufficientlyhuman.com", "http://dankim.org", "https://rpcs3.net", "http://blog.nemikor.com", "http://html5doctor.com", "http://matterpress.com", "http://feed.informer.com", "http://blog.privacylawyer.ca", "http://engineering.khanacademy.org", "https://www.malwaretech.com", "https://www.phpied.com", "https://www.nydailynews.com", "http://www.erinshellman.com", "https://allinthehead.com", "https://www.latimes.com", "https://anbbot.com", "https://benjamin.parry.is", "http://danmall.me", "https://blog.bacpluszero.com", "http://iopscience.iop.org", "https://www.bloginfosec.com", "https://engineering.vena.io", "https://thealanjackexperience.typepad.com", "http://justanotherlanguage.org", "https://slashdot.org", "https://blog.isecauditors.com", "http://www.born2data.com", "http://blog.whatfettle.com", "https://majoringinmeta.commons.gc.cuny.edu", "https://www.commitstrip.com", "https://stackshare.io", "https://craigbutcher.io", "http://geek-and-poke.com", "https://www.kevindarrah.com", "http://www.wildml.com", "https://blogs.forbes.com", "https://www.functionalgeekery.com", "http://www.ajaxrain.com", "https://pqina.nl", "https://www.waitingforfriday.com", "http://pipes.yahoo.com", "https://www.petelambert.com", "https://danielandrade.net", "https://webdesignerwall.com", "http://tttthis.com", "http://www.bay12games.com", "http://martin.kleppmann.com", "http://development.wombatsecurity.com", "http://blog.j15r.com", "https://cybergibbons.com", "https://dubroy.com", "https://www.benkuhn.net", "https://blog.smola.org", "http://secouchermoinsbete.fr", "http://blog.unmaskparasites.com", "http://rhodesmill.org", "https://www.malware-traffic-analysis.net", "https://www.leemunroe.com", "http://blog.heroku.com", "https://simplystatistics.org", "http://lawandthemultiverse.com", "https://www.databreachtoday.com", "http://movingpackets.net", "https://danielcwilson.com", "http://www.rafayhackingarticles.net", "https://www.freetronics.com.au", "http://spritesmods.com", "https://www.darkcoding.net", "http://www.fireeye.com", "https://www.webdirections.org", "https://orionmagazine.org", "https://shapeof.com", "https://soshace.com", "https://www.sec.gov", "http://www.lifewithalacrity.com", "https://www.michaelcrump.net", "https://hn.algolia.com", "https://hunch.net", "https://blog.revolutionanalytics.com", "http://jakewharton.com", "https://fullstack.info", "http://www.blueskyonmars.com", "http://neography.com", "https://partofthething.com", "https://weblogs.asp.net:443", "http://mediactive.com", "http://www.allthingsdistributed.com", "https://andybrown.me.uk", "https://clearwatercompliance.com", "http://blogs.itpro.es", "https://www.ign.com", "http://www.bouletcorp.com", "https://jimshaver.net", "http://www.jeremydjacksonphd.com", "https://technet2u.com", "https://www.daboweb.com", "https://www.finsmes.com", "http://tinmangames.com.au", "http://web.elastic.org", "https://blog.pmarca.com", "https://minesafetydisclosures.com", "https://www.secureworks.com", "http://an.enduringcolumn.com", "http://engineering.hackerearth.com", "https://www.itbusinessedge.com", "https://threatconnect.com", "https://eng.wealthfront.com", "https://labs.magnet.me", "http://blog.jquery.com", "https://www.n1ir.com", "https://www.webappers.com", "http://dunnesec.com", "https://blogs.sas.com", "http://www.yelvington.com", "https://www.huffpost.com", "https://visibility-m.ammoth.us", "https://www.3dgep.com", "https://adsecurity.org", "https://lg.io", "https://www.econlib.org", "https://donmelton.com", "https://niemanstoryboard.us", "https://www.office1.com", "https://www.a11ywithlindsey.com", "http://www.lucadentella.it", "http://www.thekanes.org", "https://collation.folger.edu", "http://blog.thiseldo.co.uk", "https://davidwalsh.name", "http://secondtruth.com", "http://www.vivantecorp.com", "https://research.fb.com", "https://idiosyncratic-ruby.com", "https://sandimetz.com", "http://tom.preston-werner.com", "https://rhinosecuritylabs.com", "http://blog.joelambert.co.uk", "http://www.embedded-creations.com", "https://jacobian.org", "https://moderndevice.com", "http://plasticbag.org", "http://www.ibm.com", "http://piotrpasich.com", "http://backchannel.org", "https://ctftime.org", "https://tech.findmypast.com", "https://terranova.blogs.com", "https://dave.cheney.net", "https://www.hilobrow.com", "http://heliosoph.mit-links.info", "https://blog.patternsinthevoid.net", "http://www.theimaginationage.net", "http://prog21.dadgum.com", "http://www.qalc.fr", "http://abovethecrowd.com", "https://codeascraft.com", "http://www.desert-home.com", "http://www.planetarduino.org", "https://snook.ca", "https://css-weekly.com", "http://www.readysetdc.com", "https://lazyprogrammer.me", "https://www.honeybadger.io", "http://www.imsolidstate.com", "https://blog.solderpad.com", "https://www.briangrinstead.com", "https://drjeffcornwall.com", "https://www.cringely.com", "https://code.tutsplus.com", "https://www.stevesouders.com", "http://www.sleuthkit.org", "https://intellipaat.com", "http://seclists.org", "http://sc-fa.com", "https://www.riskbasedsecurity.com", "http://collectiveidea.com", "http://arduino-praxis.ch", "http://www.palgorithm.co.uk", "http://www.benfrederickson.com", "http://hicks:8888", "https://www.noobpreneur.com", "http://www.kerrywong.com", "http://manu.sporny.org", "http://iijiij.com", "https://www.wired.com", "https://mediastorm.com", "https://www.sonniesedge.net", "https://www.tigoe.com", "http://www.echojs.com", "http://www.grandideastudio.com", "http://feeds.nature.com", "https://www.felienne.com", "https://sebastianraschka.com", "http://www.spockosbrain.com", "https://andyabramson.blogs.com", "https://blog.reybango.com", "http://www.lovemysurface.net", "http://tenderlovemaking.com", "http://nautil.us", "http://treycausey.com", "https://psuter.net", "http://www.freelists.org", "https://www.cyberhades.com", "http://www.doctormonk.com", "https://backtrace.io", "https://www.sammobile.com", "http://playwithlearning.com", "https://webaim.org", "http://tech.gilt.com", "http://benmccormick.org", "https://www.windowscentral.com", "http://blog.dylanjpierce.com", "http://barradeau.com", "http://zachholman.com", "https://nyc.wordcamp.org", "https://yifan.lu", "http://www.falsegravity.com", "https://1raindrop.typepad.com", "https://emberigniter.com", "https://www.computervisionblog.com", "https://www.tiraniddo.dev", "https://www.social-engineer.org", "http://www.schemehostport.com", "https://technology.condenast.com", "http://www.cimgf.com", "http://www.0verl0ad.net", "http://www.validatethis.co.uk", "https://www.benefitfocus.com", "https://redmondmag.com", "https://raffy.ch", "https://www.hackster.io", "https://gorails.com", "https://blog.pchudzik.com", "http://daveshackleford.com", "http://borderhouseblog.com", "https://www.babbel.com", "http://typeocaml.com", "http://css3pie.com", "http://blog.mikiobraun.de", "http://www.bot-thoughts.com", "https://radimrehurek.com", "https://grack.com", "https://engineering.giphy.com", "http://securityspread.com", "http://www.webaxe.org", "http://coenraets.org", "http://www.softwareishard.com", "https://joshtronic.com", "https://cloudsecurityalliance.org", "https://www.chicagotribune.com", "http://sudhagar.com", "http://dragan.rocks", "http://lambda-the-ultimate.org", "https://sdgelectronics.co.uk", "https://chemistry-europe.onlinelibrary.wiley.com", "https://www.microled-info.com", "http://tech.opentable.com", "https://blog.patrickmeenan.com", "http://karman.cc", "http://jaanus.tech-thing.org", "https://news.ycombinator.com", "https://pro.a5d.biz", "http://5against4.com", "https://soldernerd.com", "https://changelog.com", "https://neilpatel.com", "https://www.redflymarketing.com", "https://stormpath.com", "https://www.insidegadgets.com", "https://longform.org", "https://veerle.duoh.com", "https://julesforrest.com", "https://blog.klipse.tech", "https://www.exocomics.com", "https://yurisk.info", "https://wingolog.org", "http://j-hoberman.com", "https://thatthinginswift.com", "http://dtrace.org", "http://www.weblogcartoons.com", "https://blogs.nvidia.com", "http://jeffq.com", "http://willystreetblog.com", "https://markdotto.com", "http://www.machinedlearnings.com", "http://worrydream.com", "http://tech.trello.com", "https://nerdssupport.com", "http://www.newsinnovation.com", "https://extremeelectronics.co.in", "https://www.icann.org", "https://http:", "https://cloudfour.com", "http://making.fiftythree.com", "http://www.last100.com", "http://dmitrysoshnikov.com", "https://www.digitalocean.com", "https://www.cloudidentity.com", "https://smus.com", "https://aiche.onlinelibrary.wiley.com", "https://blog.frankmtaylor.com", "https://www.confluent.io", "http://artem.sobolev.name", "https://www.stormshield.com", "https://webplatform.news", "http://engineering.speedledger.com", "https://www.sl2square.org", "https://www.quietrev.com", "http://www.davidralbrecht.com", "https://boz.com", "https://krebsonsecurity.com", "http://www.nothinglabs.com", "https://engineering.fb.com", "https://blog.atom.io", "https://phoboslab.org", "https://oleb.net", "http://support.fortinet.com", "https://www.tbray.org", "https://contently.com", "https://badassjs.com", "https://www.theengineeringmanager.com", "https://www.cerebralmeltdown.com", "http://masnun.com", "http://danzarrella.com", "http://marknormanfrancis.com", "http://blog.andrewray.me", "https://felixge.de", "http://skpang.co.uk", "https://devblog.coolblue.nl", "https://follow.it", "http://smdprutser.nl", "https://www.therestisnoise.com", "https://akrabat.com", "https://frankchimero.com", "http://blog.stevemcauley.com", "https://scattered-thoughts.net", "https://eps.harvard.edu", "http://lacker.io", "http://blog.rtwilson.com", "http://m.ammoth.us", "https://www.natashatherobot.com", "https://chromatichq.com", "https://www.brucelawson.co.uk", "http://www.openglsuperbible.com", "https://www.webmip.es", "http://www.reactionzine.com", "https://streamhacker.com", "https://blogs.mathworks.com", "http://monkey.org", "https://www.faludi.com", "https://status.canary.is", "http://www.khronos.org", "https://blog.vinu.co.in", "https://blog.rootshell.be", "https://londonist.com", "http://www.thegrumpyprogrammer.com", "http://nitesharora.com", "http://softwareas.com", "https://nickcraver.com", "https://www.ianjohnston.com", "https://webkit.org", "https://www.tatianamac.com", "http://themodernlife.net", "https://addyosmani.com", "http://scadamag.infracritical.com", "https://blog.nelhage.com", "http://eng.rightscale.com", "https://ankane.org", "https://leahneukirchen.org", "http://building-babylon.net", "http://www.toddfun.com", "http://www.dimension3.sk", "https://www.honigperlen.at", "https://www.umpcportal.com", "http://www.pnas.org", "http://engineering.curalate.com", "https://starlightrunner.com", "https://csswizardry.com", "https://dailytechvideo.com", "http://www.berkeleymews.com", "https://h5bp.net", "http://www.ravelrumba.com", "https://www.elasticpath.com", "http://hacktext.com", "https://www.predictiveanalyticsworld.com", "https://www.hackerfactor.com", "https://www.technotalkative.com", "http://mourafiq.com", "https://blog.mindedsecurity.com", "http://philcalcado.com", "https://blogs.jpcert.or.jp", "https://weblog.rubyonrails.org", "https://blog.cugu.eu", "http://engineering.shapesecurity.com", "https://alanstorm.com", "https://www.elecrom.com", "http://johnnunemaker.com", "https://www.securityweek.com", "https://www.mike-stirling.com", "http://www.meganmarie.io", "http://blog.webmproject.org", "https://thisdayintechhistory.com", "http://www.brandonmartinez.com", "http://webuild.envato.com", "https://www.norwegiancreations.com", "http://blog.chembark.com", "http://www.lunarbaboon.com", "https://www.wayneandlayne.com", "https://galido.net", "https://todbot.com", "https://realtimecollisiondetection.net", "https://www.jonathanfields.com", "http://htmlui.com", "https://pinboard.in", "http://www.startupcompanylawyer.com", "https://www.bjornjohansen.com", "https://thoughtbot.com", "http://www.dbms2.com", "https://parkermalenke.com", "https://www.ehackingnews.com", "https://www.decarpentier.nl", "http://www.thespanner.co.uk", "https://scottohara.me", "https://blog.bramp.net", "https://webdesign.tutsplus.com", "http://macetech.com", "http://blog.rareschool.com", "https://datasciencebowl.com", "https://code.lulalala.com", "http://www.superheronation.com", "https://www.attack-gecko.net", "https://engineering.clever.com", "http://stephaniehurlburt.com", "http://www.unpressablebuttons.com", "https://blog.thedataincubator.com", "http://blog.threatexpert.com", "http://www.nowozin.net", "http://ryanmorr.com", "https://xo.typepad.com", "https://ozzmaker.com", "http://0xadada.pub", "https://www.boris-johnson.com", "https://speckyboy.com", "https://fabiensanglard.net", "http://www.squarefree.com", "http://www.headlinejunky.com", "https://pbfcomics.com", "http://ro-che.info", "http://pmonta.com", "https://www.pentadact.com", "http://simurai.com", "https://curiosityquills.com", "http://ludist.com", "http://armdevices.net", "https://niiconsulting.com", "https://dropshado.ws", "https://www.sethlevine.com", "http://www.jonas-kyratzes.net", "https://www.otakujournalist.com", "https://thomaspark.co", "https://daynebatten.com", "https://kinvolk.io", "http://www.didoo.net", "https://russelldavies.typepad.com", "https://datchley.name", "https://www.nngroup.com", "https://ezraklein.typepad.com", "https://www.filfre.net", "http://hop.ie", "https://www.macrumors.com", "https://paul.bone.id.au", "https://www.androidauthority.com", "https://belowthefold.typepad.com", "https://pixelkin.org", "http://academic.oup.com", "http://www.favbrowser.com", "https://mikewest.org", "http://www.g3journal.org", "https://andyfelong.com", "https://kodi.tv", "https://www.liveside.net", "http://www.sniferl4bs.com", "http://www.webdeux.info", "https://onlinelibrary.wiley.com", "http://blog.shakirm.com", "https://www.drupal.org", "http://dammitcoetzee.com", "https://www.hercampus.com", "https://thegig.typepad.com", "https://wesbos.com", "http://blog.mckeay.net", "https://mjtsai.com", "https://malicious.link", "http://www.devttys0.com", "http://almightylink.ksablan.com", "https://www.moillusions.com", "https://www.stopbadware.org", "https://code.blender.org", "https://thebell.io", "http://www.randalolson.com", "http://www.joshbarczak.com", "https://thesignalpath.com", "https://www.phoronix.com", "http://wpmued.org", "http://www.acampos.net", "https://markus.oberlehner.net", "https://uglyduck.ca", "https://www.pickthebrain.com", "https://www.forentrepreneurs.com", "https://www.nikola-breznjak.com", "https://crookedtimber.org", "https://garrettdimon.com", "http://blog.echen.me", "https://news.stanford.edu", "http://accessibleculture.org", "https://localghost.dev", "http://www.arachnidlabs.com", "http://www.secdocs.org", "http://www.standardista.com", "http://lab.guilhermemartins.net", "https://www.cornwallseo.com", "https://ivanursul.com", "https://thenextweb.com", "http://evertpot.com", "http://www.securitybydefault.com", "https://wayback.archive-it.org", "http://41j.com", "http://www.tapper-ware.net", "https://www.antagonist.nl", "http://podcast.jquery.com", "http://blog.hbcommunications.com", "https://meyerweb.com", "https://idomaster.com", "https://product.canva.com", "http://simonwillison.net", "https://haydenjames.io", "https://code.flickr.net", "http://third-bit.com", "http://www.hessmer.org", "https://shoptalkshow.com", "https://glennengstrand.info", "https://www.jheenan.com", "http://www.xevel.fr", "http://epic.org", "https://www.merrickchristensen.com", "https://www.honeynet.org", "http://www.journalism20.com", "http://beckerfuffle.com", "https://reactjsnews.com", "https://realpython.com", "http://perspectivesinmedicine.cshlp.org", "http://blog.8thcolor.com", "http://blog.data-miners.com", "https://sourcecode.entelo.com", "https://fpf.org", "https://fredturner.stanford.edu", "http://www.mulinblog.com", "http://arduinodev.com", "http://www.gamesetwatch.com", "http://www.gamasutra.com", "https://casnocha.com", "https://www.jonkensy.com", "https://rastamouse.me", "http://www.commandlinefu.com", "https://www.nirmaltv.com", "http://www.finding-eden.ca", "https://www.learndatasci.com", "http://joeduffyblog.com", "https://useyourloaf.com", "http://www.evotech.net", "https://www.theregister.com", "https://www.emergentchaos.com", "https://blog.domenic.me", "http://www.buxtronix.net", "http://mrale.ph", "https://www.bunniestudios.com", "https://www.dragonjar.org", "http://www.kylescholz.com", "https://blog.securityonion.net", "https://r2rt.com", "http://miqu.me", "http://cshperspectives.cshlp.org", "https://www.rachellaudan.com", "http://www.lafermeduweb.net", "https://catalin.red", "http://blog.drinfosec.com", "https://www.smallbizlabs.com", "https://maxlab.fr", "https://frontendfoc.us", "http://markcoddington.com", "https://blog.reverberate.org", "http://blog.xanda.org", "https://longhornengineer.com", "http://www.pcbheaven.com", "http://www.pl-enthusiast.net", "http://rachelnabors.com", "https://clevertap.com", "http://blog.sproutcore.com", "http://www.hoektronics.com", "http://newspaperdeathwatch.com", "http://www.wilfred.me.uk", "http://www.paulgraham.com", "https://www.flu-project.com", "https://csskarma.com", "https://www.electrobob.com", "http://www.brendangregg.com", "http://carlshan.com", "https://developer.okta.com", "https://webdesignernotebook.com", "http://wagerlabs.com", "https://blog.zkoss.org", "http://engineering.chartbeat.com", "http://www.lachisterablanca.com", "http://www.projectthirtythree.com", "http://engineering.vinted.com", "https://www.client9.com", "https://keithjgrant.com", "http://daverupert.com", "http://techblog.netflix.com", "https://www.pyimagesearch.com", "https://tech.nextroll.com", "http://jollygoodcode.com", "http://www.emilio.ferrara.name", "https://charman-anderson.com", "https://extrafabulouscomics.com", "http://script.aculo.us", "https://tech.karbassi.com", "http://reedbeta.com", "http://tech.taskrabbit.com", "http://dpcomputing.com.au", "http://cloudtimes.org", "http://b0tchsec.com", "https://blogs.crikey.com.au", "http://www.iryoku.com", "http://mediamatters.org", "http://blog.deconcept.com", "https://eleccelerator.com", "http://science.sciencemag.org", "http://blog.xyzw.us", "https://news.vinc.cc", "https://www.jspatterns.com", "https://nullprogram.com", "http://blog.mmacklin.com", "https://matthewseiji.com", "https://www.brandenwilliams.com", "http://here.org.uk", "http://www.position-absolute.com", "http://vonger.cn", "http://engineering.remind.com", "http://blog.sigfpe.com", "https://www.enowsoftware.com", "http://ginsweater.com", "https://www.learntoduck.com", "https://www.alkannoide.com", "https://hackaday.com", "https://www.badscience.net", "https://staysaasy.com", "http://johannesbrodwall.com", "https://toucharcade.com", "https://semilshah.com", "http://rocketdatascience.org", "http://www.over-engineered.com", "https://tech.wimdu.com", "https://blog.tojicode.com", "http://antirez.com", "https://www.parallella.org", "https://developers.soundcloud.com", "https://www.jaycollett.com", "http://tim.gremalm.se", "http://ndesign-studio.com", "https://blog.jim-nielsen.com", "https://jimromenesko.com", "https://www.toolswatch.org", "https://labs.ripe.net", "https://eclecti.cc", "https://glebbahmutov.com", "https://www.2basetechnologies.com", "https://jes.al", "http://www.viruscomix.com", "http://exple.tive.org", "http://www.exploit-monday.com", "https://blog.malwaremustdie.org", "https://www.thecodedself.com", "https://www.bankinfosecurity.com", "http://www.bitovi.com", "https://blog.aereperennius.org", "http://www.escapefromcubiclenation.com", "http://basbrun.com", "https://engineering.pivotal.io", "http://zomigi.com", "https://www.ghacks.net", "https://blog.stevemarple.co.uk", "http://ospid.com", "https://www.the-haystack.com", "http://addyosmani.com", "http://neugierig.org", "http://tech.gc.com", "https://darkbyte.net", "http://www.inventionfactory.xyz", "https://guykawasaki.com", "https://allegro.tech", "http://www.youritronics.com", "https://technology.riotgames.com", "https://www.sandiegouniontribune.com", "https://www.lightbend.com", "http://blog.redxorblue.com", "https://www.stridenyc.com", "http://jqueryfordesigners.com", "http://www.gregreda.com", "http://feinfuehlen.de", "https://etherealmind.com", "https://www.viget.com", "https://webwereld.nl", "https://status.ifttt.com", "http://reactancelabs.com", "https://w3.eleqtriq.com", "http://www.backalleycoder.com", "http://redino.net", "http://fredmcclimans.com", "https://www.kizu.ru", "https://www.gajotres.net", "https://blog.sleeplessbeastie.eu", "http://thisrecording.com", "https://fatihkalifa.com", "https://blog.knowbe4.com", "https://MicahGodbolt.com", "https://michaelteeuw.nl", "https://joy.recurse.com", "http://denishennessy.com", "http://www.scada.sl", "http://blog.jayfields.com", "https://mightyohm.com", "https://www.nayuki.io", "https://www.sans.org", "https://aarontgrogg.com", "https://www.samizdata.net", "http://raganwald.com", "http://www.deependresearch.org", "https://bhconsulting.ie", "http://www.fastmailstatus.com", "https://www.nutsvolts.com", "https://www.botanicalls.com", "http://chaordicmind.com", "https://multithreaded.stitchfix.com", "https://nathan.chantrell.net", "http://www.glacialwanderer.com", "https://www.webreflection.co.uk", "https://blog.jessriedel.com", "http://blog.syntaxc4.net", "https://outflank.nl", "https://jaketrent.com", "http://www.hoax-slayer.com", "http://blog.nihilogic.dk", "https://www.layerone.org", "http://hackedgadgets.com", "http://www.lamja.com", "https://www.mcsweeneys.net", "http://cssglobe.com", "https://bryanlrobinson.com", "http://steve.vinoski.net", "http://www.chrisfenton.com", "https://yurichev.com", "https://erikbern.com", "https://www.w3.org", "https://blog.vjeux.com", "https://blog.chaps.io", "https://blog.dynamoo.com", "http://botbench.com", "https://samsaffron.com", "http://www.tjmaher.com", "https://timworstall.typepad.com", "https://freeletics.engineering", "https://slatestarcodex.com", "https://pubs.acs.org", "https://www.greyhathacker.net", "https://product.hubspot.com", "https://mundowdg.com", "https://www.jeffbullas.com", "https://www.iaindale.com", "http://blog.thelifeofkenneth.com", "http://jasonsantamaria.com", "http://www.irongeek.com", "https://blog.fsck.com", "https://www.macsparky.com", "http://digistump.com", "https://www.bram.us", "https://giuseppegurgone.com", "https://blog.secureideas.com", "https://www.concise.co.uk", "https://blog.emberjs.com", "http://www.marekrei.com", "https://securityaffairs.co", "https://www.driftingruby.com", "http://www.afronski.pl", "http://www.holovaty.com", "http://www.bloggerheads.com", "http://www.righto.com", "https://ir-ltd.net", "https://www.nightafternight.com", "https://www.sciencedirect.com", "http://www.the-haystack.com", "https://www.hackplayers.com", "https://redcanary.com", "https://lowpowerlab.com", "https://broken-links.com", "http://www.rationaloptimist.com", "https://jonchristopher.us", "http://tech.oyster.com", "https://www.darkoperator.com", "https://news.hitb.org", "http://openschemes.com", "http://www.fsf.org", "http://matt.might.net", "https://ch00ftech.com", "https://www.poynter.org", "http://blog.securitybalance.com", "https://www.oled.at", "https://freek.dev", "http://www.mattiebrice.com", "https://tech.finn.no", "http://www.poorlydrawnlines.com", "https://natishalom.typepad.com", "https://vuejsfeed.com", "http://www.electroons.com", "https://blog.jqueryui.com", "http://www.ludibin.com", "http://www.potaroo.net", "http://www.dgkelectronics.com", "https://www.spylogic.net", "https://www.distilled.net", "https://blog.rinesi.com", "https://deliveroo.engineering", "https://martinfowler.com", "https://www.eugenewei.com", "https://marieforleo.com", "https://www.amitmerchant.com", "https://startuplawyer.com", "http://maxdesign.com.au", "http://www.dataminingblog.com", "https://www.msuiche.net", "https://bitbashing.io", "https://www.vandelaydesign.com", "http://ludo.mwclarkson.com", "https://iamakulov.com", "http://addohms.com", "https://wpjourno.com", "http://pleasantsoftware.com", "http://matpalm.com", "https://birthmoviesdeath.com", "https://voipsecurityblog.typepad.com", "https://webdesign.kmcconsulting.org", "https://www.ventureblog.com", "https://www.objective-see.com", "https://blogs.akamai.com", "https://shrimping.it", "https://yro.slashdot.org", "https://alicebartlett.co.uk", "http://rawkes.com", "http://planet-php.net", "http://code.hireart.com", "https://kb.cert.org", "https://www.oled-info.com", "https://juristr.com", "https://www.becomingadatascientist.com", "https://blogs.oracle.com", "http://www.rocketwatcher.com", "https://bravenewgeek.com", "https://ianozsvald.com", "https://www.hacktronics.com", "https://blog.webjournalist.org", "http://blog.thislongrun.com", "https://semiaccurate.com", "https://www.epanorama.net", "http://www.johncalsbeek.com", "https://thecleverest.com", "https://www.jeremyblum.com", "https://tannerchristensen.com", "http://engineering.flipboard.com", "http://allenchou.net", "http://engineering.criteolabs.com", "https://blog.isc2.org", "http://embedded-lab.com", "http://blog.stevenlevithan.com", "https://websecuritydev.com", "https://lea.verou.me", "https://engineering.squarespace.com", "https://liveramp.com", "http://www.imperialviolet.org", "http://artplustech.com", "http://johnbakersblog.co.uk", "http://brettbeauregard.com", "https://districtdatalabs.silvrback.com", "http://www.datacenterknowledge.com", "http://blogjam.com", "https://codyhouse.co", "http://www.argylejournal.com", "https://jelmertiete.com", "http://blog.cleancoder.com", "https://www.baselinemag.com", "http://www.ludicon.com", "http://npmawesome.com", "https://www.mondo2000.com", "https://blog.snootlab.com", "https://www.xylibox.com", "https://greattalks.net", "https://www.oddbird.net", "http://blog.michaelleis.com", "http://mir.aculo.us", "http://provostblog.gmu.edu", "http://www.starlino.com", "https://www.staradvertiser.com", "http://www.andybudd.com", "https://www.toptal.com", "https://www.joyofdata.de", "https://semaphoreci.com", "http://lucumr.pocoo.org", "http://www.futuretimeline.net", "http://sametmax.com", "https://blogs.fsfe.org", "http://blog.davebalmer.com", "http://www.philosophicaleconomics.com", "https://www.antifraudnews.com", "https://carlosbecker.com", "http://php.net", "https://rss.politico.com", "http://www.lispcast.com", "https://www.cert.pl", "https://searchsecurity.techtarget.com", "https://www.disruptivetelephony.com", "http://deepdish.io", "http://schmenk.is-a-geek.com", "http://mircozeiss.com", "https://nordicapis.com", "http://www.micfarris.com", "https://www.killyourdarlings.com.au", "https://bradfrost.com", "http://erlang-solutions.com", "https://www.eft-fuer-hochsensible-menschen.de", "https://domenicoluciani.com", "https://skills421.com", "https://www.deepakjoshi.me", "http://www.onstartups.com", "https://www.cerias.purdue.edu", "https://siliconhillslawyer.com", "http://www.chromasia.com", "http://www.p-value.info", "https://blog.arkency.com", "http://www.connect2mason.com", "http://www.adweek.com", "http://www.openrce.org", "https://www.elie.net", "http://www.sumsar.net", "http://sartorialscience.myntrablogs.com", "https://www.mikeaureliodesign.com", "http://www.terminally-incoherent.com", "http://saraegregory.com", "http://blog.datadive.net", "http://www.stubbornella.org", "https://hugogiraudel.com", "http://www.jsmag.com", "https://www.kdnuggets.com"], "count": 1301}')
    # links = rsp.json()['links']
    links = rsp['links']

    for link in links:
        sync_host_favicon(link)


if __name__ == '__main__':
    main()
